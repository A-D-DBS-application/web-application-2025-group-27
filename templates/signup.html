{% extends "base.html" %}

{% block title %}Sign Up{% endblock %}

{% block logo_link %}
<div class="flex items-center gap-3">
    <!-- Rival Logo - Lion Head with Crown -->
    <svg width="32" height="32" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" class="inline-block">
        <circle cx="20" cy="20" r="20" fill="#059669" class="transition-all duration-200"/>
        <path d="M12 16 L14 10 L16 12 L18 8 L19 6 L20 5 L21 6 L22 8 L24 12 L26 10 L28 16 L28 18 L12 18 Z" fill="white"/>
        <path d="M28 18 L28 22 L26 26 L24 28 L22 30 L20 31 L18 30 L16 28 L14 26 L12 22 L12 18 L14 16 L16 18 L18 20 L19 20 L20 20 L21 20 L22 18 L24 16 L26 18 Z" fill="white"/>
        <path d="M12 20 L10 18 L10 22 L12 24" fill="white"/>
        <path d="M14 22 L12 20 L12 24 L14 26" fill="white"/>
        <path d="M14 18 L12 16 L14 14 L16 16" fill="white"/>
        <circle cx="20" cy="24" r="1.5" fill="#059669"/>
        <path d="M26 24 L28 22 L26 20" stroke="#059669" stroke-width="1.5" stroke-linecap="round" fill="none"/>
    </svg>
    <a href="{{ url_for('main.homepage') }}" class="text-lg font-display font-semibold text-slate-900 hover:text-primary-600 transition-colors duration-200">
        Rival
    </a>
</div>
{% endblock %}

{% block site_header %}
{# Hide Startup Intelligence header on signup page #}
{% endblock %}

{% block auth_buttons %}
{# Hide auth buttons on signup page #}
{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center bg-warm-50 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl w-full">
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <h1 class="font-display text-2xl font-semibold text-slate-900 mb-2">Create your workspace</h1>
            <p class="text-sm text-slate-600 mb-6">Enter your information to get started.</p>
            
            <form method="POST" novalidate class="space-y-4" id="signup-form">
                <!-- Profile Details Section -->
                <fieldset class="space-y-3 border-b border-slate-200 pb-4">
                    <legend class="text-sm font-semibold text-slate-900 mb-3">Your details</legend>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="first_name" class="block text-sm font-medium text-slate-700 mb-2">First name</label>
                            <input 
                                id="first_name" 
                                type="text" 
                                name="first_name" 
                                value="{{ request.form.first_name }}" 
                                required
                                class="w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-600 focus:border-primary-600 transition-all duration-200 text-slate-900 placeholder-slate-400"
                            >
                        </div>
                        
                        <div>
                            <label for="last_name" class="block text-sm font-medium text-slate-700 mb-2">Last name</label>
                            <input 
                                id="last_name" 
                                type="text" 
                                name="last_name" 
                                value="{{ request.form.last_name }}" 
                                required
                                class="w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-600 focus:border-primary-600 transition-all duration-200 text-slate-900 placeholder-slate-400"
                            >
                        </div>
                    </div>
                    
                    <div>
                        <label for="email" class="block text-sm font-medium text-slate-700 mb-2">Email</label>
                        <input 
                            id="email" 
                            type="email" 
                            name="email" 
                            value="{{ request.form.email }}" 
                            required 
                            autocomplete="email"
                            class="w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-600 focus:border-primary-600 transition-all duration-200 text-slate-900 placeholder-slate-400"
                        >
                    </div>
                    
                    <div>
                        <label for="role" class="block text-sm font-medium text-slate-700 mb-2">Role (optional)</label>
                        <input 
                            id="role" 
                            type="text" 
                            name="role" 
                            value="{{ request.form.role }}"
                            class="w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-600 focus:border-primary-600 transition-all duration-200 text-slate-900 placeholder-slate-400"
                        >
                    </div>
                </fieldset>
                
                <!-- Company Details Section -->
                <fieldset class="space-y-3 pt-3">
                    <legend class="text-sm font-semibold text-slate-900 mb-3">Company details</legend>
                    <div>
                        <label for="company_name" class="block text-sm font-medium text-slate-700 mb-2">Company name</label>
                        <input 
                            id="company_name" 
                            type="text" 
                            name="company_name" 
                            value="{{ request.form.company_name }}" 
                            required
                            class="w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-600 focus:border-primary-600 transition-all duration-200 text-slate-900 placeholder-slate-400"
                        >
                    </div>
                    
                    <div>
                        <label for="company_domain" class="block text-sm font-medium text-slate-700 mb-2">Company domain</label>
                        <input 
                            id="company_domain" 
                            type="text" 
                            name="company_domain" 
                            value="{{ request.form.company_domain }}" 
                            placeholder="example.com" 
                            required
                            class="w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary-600 focus:border-primary-600 transition-all duration-200 text-slate-900 placeholder-slate-400"
                        >
                        <small class="mt-1.5 block text-xs text-slate-500">We'll automatically fetch company data using this domain.</small>
                    </div>
                </fieldset>
                
                <button 
                    type="submit" 
                    class="w-full bg-primary-600 text-white font-medium py-2.5 px-4 rounded-lg hover:bg-primary-700 transition-all duration-200 shadow-sm hover:shadow mt-4"
                >
                    Create workspace
                </button>
            </form>
            
            <p class="mt-6 text-center text-sm text-slate-600">
                Already have an account? 
                <a href="{{ url_for('auth.login') }}" class="font-medium text-primary-600 hover:text-primary-700 transition-colors duration-200">
                    Log in
                </a>
            </p>
        </div>
    </div>
</div>

<script>
document.getElementById('signup-form').addEventListener('submit', function(e) {
    // Show loading screen
    const loadingScreen = document.getElementById('loading-screen');
    if (loadingScreen) {
        loadingScreen.classList.remove('hidden', 'fade-out');
        // Restart hand animation
        const hand = loadingScreen.querySelector('.ðŸ¤š');
        if (hand) {
            const fingers = hand.querySelectorAll('.ðŸ‘‰');
            fingers.forEach(function(finger) {
                finger.style.animation = 'none';
                void finger.offsetWidth; // Trigger reflow
                finger.style.animation = null;
            });
        }
    }
    
    // Disable submit button to prevent double submission
    const submitBtn = this.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<svg class="animate-spin h-5 w-5 mr-2 inline" viewBox="0 0 24 24" fill="none"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Creating...';
});
</script>
{% endblock %}
